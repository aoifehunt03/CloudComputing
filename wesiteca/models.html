<!DOCTYPE html>
<!--
author : aoife hunt
date created : 25 04 2024
page desc: year 2 sem 4 aws cloud project simple website to enter the cloud-->

<html lang="en">

<head>
    <meta charset="utf-8" >
    <meta name="description" content="project website">
    <meta name="keywords" content="models, portfolio, brands, venues, photography, job search, modelling">
    <meta name="author" content="Aoife Hunt">
    <title>Portfolio | Modeling</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <nav>
            <ul>
                <li><a style="color: pink;" href="models.html">Models</a></li>
                <li><a href="brands.html">Brands</a></li>
                <li><a style="font-size: 25px;" href="index.html">Home</a></li>
                <li><a href="venues.html">Venues</a></li>
                <li><a href="contact.html">Contact</a></li>
            </ul>
        </nav>
    </header>

    <section class="portfolio-gallery">
        <h2>Headshots</h2>
        <!-- Placeholder for the fetched HTML content -->
        <div id="dataDisplay"></div> <!-- Corrected ID used in the script -->

        <!-- this will display the table scan -->
    <script>
        async function fetchData() {
            const apiUrl = 'https://3h3bav64n2.execute-api.eu-west-1.amazonaws.com/Prod/scan'; // URL to your API
            try {
                const response = await fetch(apiUrl);
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const contentType = response.headers.get('content-type');
                if (!contentType) {
                    throw new Error("Response content type not found");
                }
                
                if (contentType.includes('application/json')) {
                    const data = await response.json();
                    // Construct the table with separate columns
                    let tableHtml = '<table border="1">';
                    // Create table headers
                    tableHtml += '<tr>';
                    tableHtml += '<th>Stage Name</th>'; // Add the Stage Name as the first column
                    for (const key in data[0]) {
                        tableHtml += `<th>${key}</th>`;
                    }
                    tableHtml += '</tr>';

                    // Create table rows
                    data.forEach(item => {
                        tableHtml += '<tr>';
                        tableHtml += `<td>${item['StageName']}</td>`; // Display Stage Name in the first column
                        for (const key in item) {
                            tableHtml += `<td>${item[key]}</td>`;
                        }
                        tableHtml += '</tr>';
                    });
                    tableHtml += '</table>';
                    document.getElementById('dataDisplay').innerHTML = tableHtml;
                } else if (contentType.includes('text/html')) {
                    const data = await response.text();
                    // Parse the HTML response
                    const parser = new DOMParser();
                    const htmlDoc = parser.parseFromString(data, 'text/html');
                    const items = htmlDoc.querySelectorAll('tbody tr');
                    // Construct the table with separate columns
                    let tableHtml = '<table border="1">';
                    items.forEach(item => {
                        const columns = item.querySelectorAll('td');
                        tableHtml += '<tr>';
                        columns.forEach(column => {
                            tableHtml += `<td>${column.textContent}</td>`;
                        });
                        tableHtml += '</tr>';
                    });
                    tableHtml += '</table>';
                    document.getElementById('dataDisplay').innerHTML = tableHtml;
                } else {
                    throw new Error("Unsupported response format");
                }
            } catch (error) {
                console.error('Fetch error: ', error);
                document.getElementById('dataDisplay').textContent = 'Error loading data: ' + error.message;
            }
        }

        fetchData();
          </script>

        </section>
                  
        
        <section class="portfolio-gallery">
            <h2>Models</h2>
            <!-- this will display the model scan -->
            <!-- Placeholder for the fetched HTML content -->
            <div id="dataDisplay"></div> <!-- Corrected ID used in the script -->





            </section>
    
    

    <footer>            
        <section>
        <p>
            <small>Copyright&copy; 2024 </small>
        </p>
        </section>
    </footer>

</body>
</html>